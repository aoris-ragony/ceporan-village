---
// src/pages/index.astro
import { client } from "../lib/sanity";
import styles from "./index.module.css";

// Ambil data dari Sanity
const dataProfil = await client.fetch(`*[_type == "profileWilayah"][0]`);
---

<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{dataProfil?.namaWilayah || "Memuat..."}</title>
  </head>
  <body>
    <div class={styles.container}>
      {dataProfil ? (
        <>
          <header class={styles.header}>
            <h1 class={styles.title}>{dataProfil.namaWilayah}</h1>
            <p class={styles.description}>{dataProfil.deskripsi}</p>
          </header>

          <div class={styles.statsGrid}>
            <div class={styles.card}>
              <p class={styles.cardTitle}>Total Penduduk</p>
              <p class={styles.cardValue}>
                {dataProfil.statistik?.jumlahPenduduk.toLocaleString('id-ID')} <small style="font-size: 1rem; font-weight: 400;">Jiwa</small>
              </p>
            </div>
            
            <div class={styles.card}>
              <p class={styles.cardTitle}>Luas Wilayah</p>
              <p class={styles.cardValue}>
                {dataProfil.statistik?.luasWilayah} <small style="font-size: 1rem; font-weight: 400;">kmÂ²</small>
              </p>
            </div>
          </div>
        </>
      ) : (
        <p style="text-align: center; margin-top: 5rem;">Sedang menyambungkan ke data wilayah...</p>
      )}
    </div>
  </body>
</html>